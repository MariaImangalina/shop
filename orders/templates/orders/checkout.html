{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block content %}

<div class=container>
    <div class='row'>

        <div class='col-lg-6'>

            <h2>Please fill the delivery form</h2>
            <br>

            <form method='POST' action="{% url 'orders:checkout' %}">
                {% csrf_token %}

                {{ form|crispy }}
                
                <div>
                  <script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Af2e6b485b71b7c628142138f5ae4ee37b2a67e105024b1dff25fdc0689e34662&amp;width=500&amp;height=400&amp;lang=ru_RU&amp;scroll=true"></script>
                </div>

                <br>
                <br>
                <button type="submit" class="btn btn-success btn-lg btn-block">Submit</button>

              </form>
             
              
        </div>

        <div class='col-lg-1'></div>

        <div class='col-lg-5'>
            <h2>Order â„–{{ object.id }} detail</h2>
            <br>
            <table class='table thead-light'>
                <thead class='thead-light'>
                    <tr>
                        <th scope='col'>#</th>
                        <th scope='col'>Good Title</th> 
                        <th scope='col'>Price, RUR</th>
                        <th scope='col'></th>
                        <th scope='col'>Quantity</th>
                        <th scope='col'></th> 
                        <th scope='col'>Amount, RUR</th>
                    </tr>
                </thead>
                {% for order_good in object.goods.all %}
                <tr>
                    <th scope='row'>{{ forloop.counter }}</td>
                    <td>{{ order_good.good.title }}</td>
                    <td>{{ order_good.good.price }}</td>
                    <td><a class='btn btn-success' role='button' href="{% url 'orders:minus_qty' pk=order_good.good.pk %}">-</a></td>
                    <td>{{ order_good.quantity }}</td>
                    <td><a class='btn btn-success' role='button' href="{% url 'orders:plus_qty' pk=order_good.good.pk %}">+</a></td>
                    <td>{{ order_good.get_amount }}</td>
            
                </tr>
                {% endfor %}
            </table>
            <br>
            <h4>Total: {{ object.get_total }} RUR</h4>
            <br>
            <a class = 'btn btn-secondary' role='button' href="{% url 'goods:all' %}">Back to catalog</a>
            
        </div>

</div>

</div>
</div>

{% endblock %}